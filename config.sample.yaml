# Example configuration for audio-meta
library:
  roots:
    - /srv/music
  include_extensions:
    - .mp3
    - .flac
    - .m4a
  exclude_patterns:
    - /lost+found

providers:
  acoustid_api_key: "YOUR-ACOUSTID-KEY"
  musicbrainz_useragent: "audio-meta/0.1 (tom@example.com)"
  discogs_token: "YOUR-DISCOGS-TOKEN"
  discogs_useragent: "audio-meta/0.1 (tom@example.com)"
  # Network resilience:
  # - network_retries: number of retries after the initial attempt (so 1 = try twice total).
  # - network_retry_backoff_seconds: base sleep between retries (exponential backoff).
  network_retries: 1
  network_retry_backoff_seconds: 0.5

classical:
  genre_keywords:
    - classical
    - baroque
    - romantic
    - opera
  min_duration_seconds: 120
  title_markers:
    - symphony
    - concerto
    - suite
    - sonata

daemon:
  worker_concurrency: 4
  cache_path: ./cache/cache.sqlite3
  # Prompt UI:
  # - show_urls: include clickable MusicBrainz/Discogs links next to options.
  # - expand_mb_candidates: when choices are sparse (or coverage is low), add MusicBrainz search results.
  # - mb_search_limit: max number of extra MB search candidates to show.
  # - preview_tracks: show a short “sample tracks” section with existing tags/path guesses.
  prompt_show_urls: true
  prompt_expand_mb_candidates: true
  prompt_mb_search_limit: 6
  prompt_preview_tracks: 3
  # If true, interactive `scan`/`run` will automatically process deferred prompts after scanning completes.
  # Set false if you want scans to finish without prompting; then run `audio-meta deferred` when ready.
  process_deferred_prompts_at_end: true
  # Safety guard: if an AcoustID fingerprint match disagrees with existing tags (album/album_artist),
  # treat it as suspicious and defer the directory for manual confirmation.
  # - threshold is token-overlap ratio (0..1); higher is stricter.
  # - action: "defer" (default) or "ignore" (discard the fingerprint match and fall back to other matchers).
  fingerprint_mismatch_threshold: 0.35
  fingerprint_mismatch_action: defer
  # Safety guard for classical music: defer when performer credits are missing or inconsistent across tracks.
  # - min_tracks: only apply to directories with at least this many classical tracks.
  # - min_coverage: fraction of classical tracks that must have a usable performer hint.
  # - min_consensus: fraction of hinted tracks that must agree on the dominant performer string.
  # - action: "defer" (default) or "skip" (do nothing and record a skip reason).
  classical_credits_min_tracks: 3
  classical_credits_min_coverage: 0.6
  classical_credits_min_consensus: 0.7
  classical_credits_action: defer
  # Optional: disable built-in / entry-point pipeline plugins by `name`.
  # Examples:
  # pipeline_disable:
  #   - singleton_target_override
  #   - directory_audit
  pipeline_disable: []
  # Optional: order plugins (by `name`) within a stage. Unspecified plugins keep their relative order.
  # Keys are stage names (e.g. `directory_skip_policies`, `plan_transforms`, `directory_diagnostics`).
  # Example:
  # pipeline_order:
  #   directory_skip_policies: [processed_directory_skip, default_directory_skip]
  pipeline_order: {}

organizer:
  enabled: false
  target_root: /srv/music
  classical_mixed_strategy: performer_album
  cleanup_empty_dirs: false
  max_filename_length: 255
  archive_root: null
